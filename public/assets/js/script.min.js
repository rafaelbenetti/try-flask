"use strict";

/*jshint esversion: 6 */
var HttpRequest = function () {
    'use strict';

    var request = function request(settings) {
        return new Promise(function (resolve, reject) {
            var xhr = new XMLHttpRequest();
            xhr.open(settings.method || "GET", settings.url);
            if (settings.headers) {
                Object.keys(settings.headers).forEach(function (key) {
                    xhr.setRequestHeader(key, settings.headers[key]);
                });
            }
            xhr.onload = function () {
                if (xhr.status >= 200 && xhr.status < 300) {
                    resolve(JSON.parse(xhr.response));
                } else {
                    reject(xhr.statusText);
                }
            };
            xhr.onerror = function () {
                return reject(xhr.statusText);
            };
            xhr.send(settings.body);
        });
    };

    return request;
}();
'use strict';

/* jshint esversion: 6 */
var Urls = function () {
    'use strict';

    return {
        SERIES: 'http://localhost:5000/series'
    };
}();
'use strict';

/* jshint esversion: 6*/
var Index = function () {
    'use strict';

    var init = function init() {
        Series.init();
    };

    return {
        init: init
    };
}();
'use strict';

/* jshint esversion: 6*/
var Series = function () {
    'use strict';

    function init() {
        find();
    }

    function find() {
        HttpRequest({
            url: Urls.SERIES
        }).then(function (data) {
            createItens(data.result);
        });
    }

    function createItens(itens) {
        itens.map(createItem);
    }

    function createItem(item) {
        var template = document.querySelector('#templates .serie').cloneNode(true);

        template.querySelector('.serie-cover').src = item.coverImage;
        template.querySelector('.serie-title').value = item.name;
        template.querySelector('.serie-seasons > span').value = item.numberOfSeasons;

        document.getElementById('series').appendChild(template);
    }

    return {
        init: init
    };
}();